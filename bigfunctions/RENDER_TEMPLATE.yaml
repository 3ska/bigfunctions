type: function_js
samples:
  - "RENDER_TEMPLATE(template, context)"
description: |-
  Replaces the variables surrounded by brackets such as `{{variable_name}}` in `template` by their values defined in `context`.
  Beware that `context` keys and string values must be surrounded by double-quotes `"` and not single-quotes `'`.
arguments:
  - name: template
    type: STRING
    test_value: Hello {{who}}
  - name: context
    type: STRING
    test_value: '{"who": "world"}'
output_value:
  name: rendered_content
  type: STRING
  expected_value: Hello World
  expected_value_name: content
example: |-
  ``` sql
  SELECT {BIGFUNCTIONS_DATASET}.RENDER_TEMPLATE('Hello {{who}}', '{"who": "world"}') as content;

  +-------------+
  | content     |
  +-------------+
  | Hello World |
  +-------------+
  ```
code: |
  context = JSON.parse(context);
  const regex = new RegExp('{{(' + Object.keys(context).join('|') + ')}}', 'g');
  return template.replace(regex, (m, $1) => context[$1] || m)