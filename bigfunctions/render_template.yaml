description: Replaces variables in template
type: bigquery_udf_js
arguments:
  - name: template
    type: STRING
    description: Content from which context variables will be replaced
    example: Bigfunctions is {{what}}
  - name: context
    type: STRING
    description: |
      key-value json object casted as string (as js function do not accept json arguments)
      Keys are the variable names which will be replaced by values in content.
    example: '{"what": "awesome"}'
output_value:
  name: rendered_content
  type: STRING
  description: content with variables replaced with their values
  example: Bigfunctions is awesome
code: |
  context = JSON.parse(context);
  const regex = new RegExp('{{(' + Object.keys(context).join('|') + ')}}', 'g');
  return template.replace(regex, (m, $1) => context[$1] || m)